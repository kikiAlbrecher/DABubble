<div class="outside-overlay outside-overlay-individual" (click)="closeEditChannel()">
    <div (click)="$event.stopPropagation()" class="dialog-add-channel dialog-edit-channel"
        [ngStyle]="!isMobileEdit ? { top: position.top + 'px', left: position.left + 'px' } : {}"
        [class.mobile]="isMobileEdit" (click)="$event.stopPropagation()">
        <div class="add-headline edit-add-headline">
            <div class="headline-channel-name">
                <img class="hashtag" src="assets/icons/hashtag.svg" alt="hashtag">
                <span class="channel-title" *ngIf="selectedChannel">{{ selectedChannel.channelName.slice(1)
                    }}</span>
            </div>
            <app-close-button (close)="closeEditChannel()"></app-close-button>
        </div>

        <div class="custom-scrollbar edit-content">
            @if (!isEditingName) {
            <div class="edit-object">
                <div class="edit-object-header">
                    <span class="header-text">Channel-Name</span>
                    <button type="button" class="edit-btn" (click)="isEditingName = true">Bearbeiten</button>
                    <svg class="svg-style edit-btn-mobile" (click)="isEditingName = true" width="30" height="30"
                        viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="30" height="30" rx="15" fill="#ECEEFE" />
                        <mask id="mask0_141334_2368" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="3" y="3"
                            width="24" height="24">
                            <rect x="3" y="3" width="24" height="24" fill="#D9D9D9" />
                        </mask>
                        <g mask="url(#mask0_141334_2368)">
                            <path
                                d="M8 22H9.4L18.025 13.375L16.625 11.975L8 20.6V22ZM22.3 11.925L18.05 7.725L19.45 6.325C19.8333 5.94167 20.3043 5.75 20.863 5.75C21.421 5.75 21.8917 5.94167 22.275 6.325L23.675 7.725C24.0583 8.10833 24.2583 8.571 24.275 9.113C24.2917 9.65433 24.1083 10.1167 23.725 10.5L22.3 11.925ZM7 24C6.71667 24 6.47933 23.904 6.288 23.712C6.096 23.5207 6 23.2833 6 23V20.175C6 20.0417 6.025 19.9127 6.075 19.788C6.125 19.6627 6.2 19.55 6.3 19.45L16.6 9.15L20.85 13.4L10.55 23.7C10.45 23.8 10.3377 23.875 10.213 23.925C10.0877 23.975 9.95833 24 9.825 24H7Z"
                                fill="#1C1B1F" />
                        </g>
                    </svg>
                </div>
                <div class="headline-channel-name edit-object-description">
                    <img src="assets/icons/hashtag.svg" alt="channel prefix #">
                    <span class="content-text" *ngIf="selectedChannel">{{ selectedChannel.channelName.slice(1)
                        }}</span>
                </div>
            </div>
            }

            @if(isEditingName) {
            <app-channel-name [control]="channelNameControl" [channelExistsError]="channelExistsError"
                [allowEditName]="true" [validationUntouched]="true" (saveName)="saveEditName()"
                class="components-width">
            </app-channel-name>
            }

            @if(!isEditingDescription) {
            <div class="edit-object description-creator">
                <div class="edit-object-content">
                    <div class="edit-object-header">
                        <span class="header-text">Beschreibung</span>
                        <button type="button" class="edit-btn" (click)="isEditingDescription = true">Bearbeiten</button>
                        <svg class="svg-style edit-btn-mobile" (click)="isEditingDescription = true" width="30"
                            height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="30" height="30" rx="15" fill="#ECEEFE" />
                            <mask id="mask0_141334_2368" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="3" y="3"
                                width="24" height="24">
                                <rect x="3" y="3" width="24" height="24" fill="#D9D9D9" />
                            </mask>
                            <g mask="url(#mask0_141334_2368)">
                                <path
                                    d="M8 22H9.4L18.025 13.375L16.625 11.975L8 20.6V22ZM22.3 11.925L18.05 7.725L19.45 6.325C19.8333 5.94167 20.3043 5.75 20.863 5.75C21.421 5.75 21.8917 5.94167 22.275 6.325L23.675 7.725C24.0583 8.10833 24.2583 8.571 24.275 9.113C24.2917 9.65433 24.1083 10.1167 23.725 10.5L22.3 11.925ZM7 24C6.71667 24 6.47933 23.904 6.288 23.712C6.096 23.5207 6 23.2833 6 23V20.175C6 20.0417 6.025 19.9127 6.075 19.788C6.125 19.6627 6.2 19.55 6.3 19.45L16.6 9.15L20.85 13.4L10.55 23.7C10.45 23.8 10.3377 23.875 10.213 23.925C10.0877 23.975 9.95833 24 9.825 24H7Z"
                                    fill="#1C1B1F" />
                            </g>
                        </svg>
                    </div>
                    <div class="edit-object-description">
                        <p class="content-text" *ngIf="selectedChannel">{{ selectedChannel.channelDescription }}
                        </p>
                    </div>
                </div>
                <div class="separator"></div>
                <div class="creator">
                    <span class="header-text">Erstellt von</span>
                    <span class="channel-creator-name" *ngIf="selectedChannel">{{ creatorName$ | async }}</span>
                </div>
            </div>
            }

            @if(isEditingDescription) {
            <app-channel-description [control]="channelDescriptionControl" [allowEditDescription]="true"
                (save)="saveEditDescription()" class="components-width">
            </app-channel-description>
            <div class="separator"></div>
            <div class="creator">
                <span class="header-text">Erstellt von</span>
                <span class="channel-creator-name" *ngIf="selectedChannel">{{ creatorName$ | async }}</span>
            </div>
            }

            <div class="edit-object edit-object-mobile">
                <app-dialog-show-channel-members [asOverlay]="false" [users]="channelMembers"
                    [selectedUserId]="selectedUserId" (userClicked)="onUserClicked($event)"
                    (openAddMembersMobile)="onAddUserMobile()" [asOverlay]="!isMobileEdit"
                    [ngStyle]="!isMobileEdit ? {} : { left: '0', bottom: '0' }"
                    [ngClass]="{ 'mobile-add-member': isMobileEdit }">
                </app-dialog-show-channel-members>
            </div>

            <div class="save-action">
                <button class="leave-btn" class="submit-button" (click)="leaveChannel()">
                    Channel verlassen
                </button>
            </div>
        </div>
    </div>
</div>