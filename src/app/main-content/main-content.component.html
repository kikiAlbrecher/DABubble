<div class="main-content">
    <div class="section-content">
        <div class="header">
            <app-logo></app-logo>
            <app-searchbar class="header-searchbar"></app-searchbar>
            <app-user-header></app-user-header>
        </div>

        <div class="main-components" [class.workspace-closed]="!(shared.workspaceOpen$ | async)"
            [class.threads-open]="(shared.threadsVisible$ | async)">
            <app-side-nav (addChannel)="openDialogAddChannel()" (selectChannel)="onChannelSelected($event)"
                (selectUser)="onUserSelected($event)" [showAddChannelDialog]="showAddChannelDialog"></app-side-nav>
            <app-main-chat (addMember)="openDialogAddMember()" (showUserProfile)="openProfile()"
                (editChannel)="openDialogEditChannel()" (members)="onReceiveMembers($event)"
                (selectedUserChange)="onSelectedUserChanged($event)" [selectedChannel]="selectedChannel"
                [selectedUser]="selectedUser" [sideNavOpen]="true"
                [showAddMemberDialog]="showAddMemberDialog"></app-main-chat>
            <app-threads *ngIf="shared.threadsVisible$ | async"></app-threads>
            <div class="outside-overlay" *ngIf="showProfile" (click)="showProfile = false">
                <app-user-profile [user]="selectedUser!" [allowEdit]="false"></app-user-profile>
            </div>
        </div>

        <app-dialog-add-channel *ngIf="showAddChannelDialog" (close)="closeDialogAddChannel()"
            (save)="createChannel($event)">
        </app-dialog-add-channel>
        <app-dialog-add-channel-member *ngIf="addChannelMember" [currentChannelId]="selectedChannel?.channelId"
            (close)="closeAddChannelMember()" (save)="saveAddChannelMember($event)">
        </app-dialog-add-channel-member>
        <app-dialog-add-member *ngIf="showAddMemberDialog" [selectedChannel]="selectedChannel" (close)="closeDialogAddMember()"
        (save)="saveAddChannelMember($event)">
        </app-dialog-add-member>
        <app-dialog-edit-channel *ngIf="editChannel" [selectedChannel]="selectedChannel"
            (close)="closeDialogEditChannel()">
        </app-dialog-edit-channel>
        <app-dialog-show-channel-members *ngIf="showMembers" [users]="users" [selectedUserId]="selectedUser?.id ?? null"
            (close)="closeDialogShowMembers()" (openAddMembers)="openDialogAddMember()">
        </app-dialog-show-channel-members>
        <app-status-messages *ngIf="statusMessage" [statusMessage]="statusMessage"
            [statusMessageType]="statusMessageType">
        </app-status-messages>
    </div>
</div>